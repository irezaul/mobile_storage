<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-green-600 to-teal-600 p-4">

  <div class="max-w-2xl mx-auto">
    <div class="bg-white rounded-3xl shadow-2xl overflow-hidden p-8">

      <h1 class="text-3xl font-bold text-center mb-6 text-green-700">Admin Panel</h1>
      <button onclick="logout()" class="mb-6 px-6 py-3 bg-red-600 text-white rounded-full">Logout</button>

      <div class="mb-6">
        <input type="text" id="newProduct" placeholder="New product name" class="w-full px-5 py-4 border-2 rounded-xl text-lg">
        <button onclick="addProduct()" class="mt-3 w-full py-4 bg-green-600 text-white font-bold rounded-xl hover:bg-green-700">
          Add Product
        </button>
      </div>

      <div id="adminList" class="space-y-4"></div>

      <div class="mt-8 p-6 bg-gray-100 rounded-xl">
        <h3 class="font-bold mb-3">How to Save Changes Permanently:</h3>
        <ol class="list-decimal list-inside space-y-2 text-sm">
          <li>Click "Copy JSON" below</li>
          <li>Go to GitHub → your repo → products.json</li>
          <li>Click "Edit this file" (pencil icon)</li>
          <li>Paste new JSON → Commit changes</li>
        </ol>
        <button onclick="copyJSON()" class="mt-4 w-full py-3 bg-blue-600 text-white rounded-xl font-bold">
          Copy Current JSON to Clipboard
        </button>
      </div>
    </div>
  </div>

  <script>
    if (sessionStorage.getItem('admin') !== 'true') {
      alert("Login required!");
      window.location.href = 'index.html';
    }

    function logout() {
      sessionStorage.removeItem('admin');
      window.location.href = 'index.html';
    }

    let products = [];

    fetch('products.json')
      .then(r => r.json())
      .then(data => {
        products = data;
        showAdminProducts();
      });

    function addProduct() {
      const name = document.getElementById('newProduct').value.trim();
      if (!name) return alert("Enter product name");
      
      products.push({
        id: Date.now(),
        name: name
      });
      document.getElementById('newProduct').value = '';
      showAdminProducts();
    }

    function deleteProduct(id) {
      products = products.filter(p => p.id !== id);
      showAdminProducts();
    }

    function showAdminProducts() {
      const list = document.getElementById('adminList');
      list.innerHTML = products.map(p => `
        <div class="flex justify-between items-center bg-gradient-to-r from-green-50 to-teal-50 p-4 rounded-xl">
          <span class="text-lg font-medium">${p.name}</span>
          <button onclick="deleteProduct(${p.id})" class="p-3 bg-red-500 text-white rounded-full">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>
        </div>
      `).join('');
    }

    function copyJSON() {
      const jsonStr = JSON.stringify(products, null, 2);
      navigator.clipboard.writeText(jsonStr);
      alert("JSON copied! Now paste it in products.json on GitHub");
    }
  </script>
</body>
</html>
